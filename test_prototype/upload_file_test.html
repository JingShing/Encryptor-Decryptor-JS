<!DOCTYPE html>
<html>
<head>
  <title>File Reader</title>
  <meta charset="utf-8">
  <script>

    function handleDragOver(evt) {
      evt.stopPropagation();
      evt.preventDefault();
      evt.dataTransfer.dropEffect = 'copy';
    }
  </script>
</head>
<body>
  <form id = "all_file_input">
    <input type="file" id="fileInput1" style="display:none">
    <label for="fileInput1">選擇文件</label>
    <br>
    <textarea id="content" rows="10" cols="50"></textarea>
    <br>
    <input type="file" id="fileInput2" style="display:none">
    <label for="fileInput2">選擇文件</label>
    <br>
    <textarea id="content2" rows="10" cols="50"></textarea>
  </form>

  <script>
    var dropZone = document.querySelector('#content');
    dropZone.addEventListener('dragover', handleDragOver, false);
    dropZone.addEventListener('drop', handleFileSelect, false);

    var fileInput = document.querySelector('#fileInput1');
    fileInput.addEventListener('change', handleFileSelect, false);

    var dropZone2 = document.querySelector('#content2');
    dropZone2.addEventListener('dragover', handleDragOver, false);
    dropZone2.addEventListener('drop', handleFileSelect, false);

    var fileInput2 = document.querySelector('#fileInput2');
    fileInput2.addEventListener('change', handleFileSelect, false);

    
    function handleFileSelect(evt) {
        evt.stopPropagation();
        evt.preventDefault();
        var new_id = "";
        var old_id = String(event.target.id);
        if(old_id.includes("fileInput")){
            var file = evt.target.files[0];
            if(old_id.includes("1"))new_id = "content";
            else if(old_id.includes("2"))new_id = "content2";
        }
        else{
            var file = evt.dataTransfer.files[0];
            new_id = old_id;
        }
                
        var reader = new FileReader();
        reader.onload = function(event) {
                document.getElementById(new_id).value = event.target.result;
        };
        reader.readAsText(file);
        var inputs = document.getElementsByTagName("input");
        for (var i = 0; i < inputs.length; i++) {
            inputs[i].value = "";
        }
    }
  </script>
</body>
</html>
